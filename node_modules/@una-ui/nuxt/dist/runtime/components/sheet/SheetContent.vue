<script setup>
import { reactiveOmit } from "@vueuse/core";
import { DialogContent, DialogPortal, useForwardPropsEmits } from "reka-ui";
import { computed } from "vue";
import { cn } from "../../utils";
import SheetClose from "./SheetClose.vue";
import SheetOverlay from "./SheetOverlay.vue";
defineOptions({
  inheritAttrs: false
});
const props = defineProps({
  class: { type: null, required: false },
  sheet: { type: null, required: false, default: "right" },
  dismissible: { type: Boolean, required: false, default: true },
  showClose: { type: Boolean, required: false, default: true },
  overlay: { type: Boolean, required: false, default: true },
  _sheetClose: { type: Object, required: false },
  _sheetOverlay: { type: Object, required: false },
  _sheetPortal: { type: Object, required: false },
  una: { type: Object, required: false },
  forceMount: { type: Boolean, required: false },
  disableOutsidePointerEvents: { type: Boolean, required: false },
  asChild: { type: Boolean, required: false },
  as: { type: null, required: false }
});
const emits = defineEmits(["escapeKeyDown", "pointerDownOutside", "focusOutside", "interactOutside", "openAutoFocus", "closeAutoFocus"]);
const contentProps = reactiveOmit(props, ["sheet", "class", "_sheetClose", "_sheetPortal", "_sheetOverlay"]);
const forwarded = useForwardPropsEmits(contentProps, emits);
const contentEvents = computed(() => {
  if (!props.dismissible) {
    return {
      pointerDownOutside: (e) => e.preventDefault(),
      interactOutside: (e) => e.preventDefault(),
      escapeKeyDown: (e) => e.preventDefault(),
      closeAutoFocus: (e) => e.preventDefault()
    };
  }
  return {
    closeAutoFocus: (e) => e.preventDefault()
  };
});
</script>

<template>
  <DialogPortal
    v-bind="props._sheetPortal"
    :class="cn('sheet-portal', props.una?.sheetPortal, props._sheetPortal?.class)"
  >
    <SheetOverlay
      v-if="props.overlay"
      v-bind="_sheetOverlay"
    />
    <DialogContent
      data-slot="sheet-content"
      v-bind="{ ...forwarded, ...$attrs }"
      :sheet
      :class="cn(
  'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500',
  'sheet-content',
  props.una?.sheetContent,
  props.class
)"
      v-on="contentEvents"
    >
      <slot />

      <SheetClose
        v-if="props.showClose"
        :class="cn('sheet-close', props.una?.sheetClose)"
        v-bind="props._sheetClose"
      />
    </DialogContent>
  </DialogPortal>
</template>
