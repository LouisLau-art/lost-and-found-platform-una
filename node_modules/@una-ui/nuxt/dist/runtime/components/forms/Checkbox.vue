<script setup>
import { reactivePick } from "@vueuse/core";
import { CheckboxIndicator, CheckboxRoot, useForwardPropsEmits } from "reka-ui";
import { computed } from "vue";
import { cn, randomId } from "../../utils";
import Icon from "../elements/Icon.vue";
import Label from "../elements/Label.vue";
defineOptions({
  inheritAttrs: false
});
const props = defineProps({
  checkbox: { type: String, required: false, default: "primary" },
  label: { type: String, required: false },
  size: { type: String, required: false, default: "md" },
  reverse: { type: Boolean, required: false },
  forceMount: { type: Boolean, required: false, default: true },
  _checkboxIndicator: { type: Object, required: false },
  _label: { type: Object, required: false },
  una: { type: Object, required: false },
  defaultValue: { type: [Boolean, String], required: false },
  modelValue: { type: [Boolean, String, null], required: false },
  disabled: { type: Boolean, required: false },
  value: { type: null, required: false },
  id: { type: String, required: false },
  asChild: { type: Boolean, required: false },
  as: { type: null, required: false },
  name: { type: String, required: false },
  required: { type: Boolean, required: false },
  class: { type: null, required: false },
  for: { type: String, required: false }
});
const emits = defineEmits(["update:modelValue"]);
const rootProps = reactivePick(props, [
  "required",
  "disabled",
  "value",
  "modelValue",
  "defaultValue"
]);
const forwarded = useForwardPropsEmits(rootProps, emits);
const id = computed(() => props.id ?? randomId("checkbox"));
</script>

<template>
  <div
    :class="cn(
  'checkbox-wrapper flex',
  una?.checkboxWrapper,
  reverse && 'checkbox-reverse'
)"
  >
    <CheckboxRoot
      v-bind="{ ...forwarded, ...$attrs }"
      :id="id"
      v-slot="slotProps"
      :class="
  cn(
    'peer checkbox',
    props.class
  )
"
      :size
      :checkbox
    >
      <CheckboxIndicator
        :force-mount
        :size
        :class="cn('checkbox-indicator', una?.checkboxIndicator)"
        v-bind="props._checkboxIndicator"
      >
        <slot
          name="icon" v-bind="slotProps"
        >
          <Icon
            :name="slotProps.state === 'indeterminate' ? props.una?.checkboxIndeterminateIcon ?? 'checkbox-indeterminate-icon' : slotProps.state ? props.una?.checkboxCheckedIcon ?? 'checkbox-checked-icon' : props.una?.checkboxUncheckedIcon ?? 'checkbox-unchecked-icon'"
            :class="cn('checkbox-icon-base', una?.checkboxIconBase)"
          />
        </slot>
      </CheckboxIndicator>
    </CheckboxRoot>

    <Label
      v-if="$slots.default || label"
      :for="props.for || id"
      :class="cn('checkbox-label', una?.checkboxLabel)"
      v-bind="props._label"
    >
      <slot>
        {{ label }}
      </slot>
    </Label>
  </div>
</template>
