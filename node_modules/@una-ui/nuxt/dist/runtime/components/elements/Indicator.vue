<script setup>
import { createReusableTemplate } from "@vueuse/core";
import { computed } from "vue";
defineOptions({
  inheritAttrs: false
});
const props = defineProps({
  size: { type: String, required: false },
  indicator: { type: String, required: false },
  label: { type: String, required: false },
  ping: { type: Boolean, required: false },
  visible: { type: Boolean, required: false, default: true },
  una: { type: Object, required: false }
});
const indicatorPlacements = ["top-left", "top-right", "bottom-left", "bottom-right"];
const hasPlacement = computed(() => indicatorPlacements.some((indicatorPlacements2) => props.indicator?.includes(indicatorPlacements2)));
const indicatorVariants = ["solid"];
const hasVariant = computed(() => indicatorVariants.some((indicatorVariants2) => props.indicator?.includes(indicatorVariants2)));
const isBaseVariant = computed(() => props.indicator?.includes("~"));
const [DefineTemplate, ReuseTemplate] = createReusableTemplate();
</script>

<template>
  <div
    indicator="wrapper"
    :class="una?.indicatorWrapper"
  >
    <slot />

    <span v-if="visible" :size="size">
      <DefineTemplate v-slot="{ ping }">
        <slot name="indicator">
          <span
            v-bind="$attrs"
            :indicator="indicator"
            class="indicator whitespace-nowrap"
            :class="[
  { 'indicator-default-placement': !hasPlacement },
  { 'indicator-default-variant': !hasVariant && !isBaseVariant },
  { 'animate-ping ring-none': ping },
  !label ? 'indicator-dot' : 'indicator-label',
  una?.indicator
]"
          >
            <slot name="label">
              {{ label }}
            </slot>
          </span>
        </slot>
      </DefineTemplate>

      <ReuseTemplate :ping="ping" />
      <ReuseTemplate />
    </span>
  </div>
</template>
