<script setup>
import { ComboboxInput, useForwardPropsEmits } from "reka-ui";
import { inject, onMounted, ref } from "vue";
import { isInComboboxListKey } from "../../utils/injectionKeys";
import Input from "../forms/Input.vue";
defineOptions({
  inheritAttrs: false
});
const props = defineProps({
  displayValue: { type: Function, required: false },
  modelValue: { type: String, required: false },
  autoFocus: { type: Boolean, required: false },
  disabled: { type: Boolean, required: false },
  asChild: { type: Boolean, required: false },
  as: { type: null, required: false },
  type: { type: null, required: false },
  status: { type: String, required: false },
  loading: { type: Boolean, required: false },
  reverse: { type: Boolean, required: false },
  autofocus: { type: Boolean, required: false },
  autofocusDelay: { type: Number, required: false },
  leading: { type: String, required: false },
  trailing: { type: String, required: false },
  input: { type: String, required: false },
  size: { type: String, required: false },
  id: { type: String, required: false },
  autoresize: { type: [Boolean, Number], required: false },
  resize: { type: [String, null], required: false },
  rows: { type: Number, required: false },
  cols: { type: Number, required: false },
  una: { type: Object, required: false },
  _inputWrapper: { type: Object, required: false }
});
const emits = defineEmits(["update:modelValue"]);
const forwarded = useForwardPropsEmits(props, emits);
const inputRef = ref();
const isInList = inject(isInComboboxListKey, false);
onMounted(() => {
  if (isInList) {
    inputRef.value?.focus();
  }
});
</script>

<template>
  <ComboboxInput
    v-bind="props"
    as-child
  >
    <Input
      ref="inputRef"
      data-slot="command-input"
      v-bind="{ ...forwarded, ...$attrs }"
      :_input-wrapper="{
  'data-slot': 'command-input-wrapper'
}"
    >
      <template v-for="(_, name) in $slots" #[name]="slotData">
        <slot :name="name" v-bind="slotData" />
      </template>
    </Input>
  </ComboboxInput>
</template>
