<script setup>
import { reactiveOmit } from "@vueuse/core";
import { ComboboxTrigger, useForwardProps } from "reka-ui";
import { computed } from "vue";
import { cn, randomId } from "../../utils";
import Button from "../elements/Button.vue";
import Icon from "../elements/Icon.vue";
const props = defineProps({
  id: { type: String, required: false },
  status: { type: String, required: false },
  una: { type: Object, required: false },
  disabled: { type: Boolean, required: false },
  asChild: { type: Boolean, required: false },
  as: { type: null, required: false },
  type: { type: String, required: false },
  loadingPlacement: { type: String, required: false },
  icon: { type: Boolean, required: false },
  reverse: { type: Boolean, required: false },
  loading: { type: Boolean, required: false },
  block: { type: Boolean, required: false },
  to: { type: null, required: false },
  label: { type: String, required: false },
  btn: { type: String, required: false, default: "outline-gray" },
  leading: { type: String, required: false },
  trailing: { type: String, required: false },
  size: { type: String, required: false },
  square: { type: null, required: false },
  rounded: { type: null, required: false },
  class: { type: null, required: false },
  breadcrumbActive: { type: String, required: false },
  breadcrumbInactive: { type: String, required: false },
  paginationSelected: { type: String, required: false },
  paginationUnselected: { type: String, required: false },
  dropdownMenu: { type: String, required: false },
  toggleOn: { type: String, required: false },
  toggleOff: { type: String, required: false },
  tabsActive: { type: String, required: false },
  tabsInactive: { type: String, required: false },
  navigationMenu: { type: String, required: false },
  navigationMenuLink: { type: String, required: false },
  ariaLabel: { type: String, required: false }
});
const forwardedProps = useForwardProps(reactiveOmit(props, "class", "status", "una", "btn"));
const statusClassVariants = computed(() => {
  const btn = {
    info: "btn-outline-info",
    success: "btn-outline-success",
    warning: "btn-outline-warning",
    error: "btn-outline-error",
    default: void 0
  };
  const icon = {
    info: props.una?.comboboxTriggerInfoIcon ?? "combobox-trigger-info-icon",
    success: props.una?.comboboxTriggerSuccessIcon ?? "combobox-trigger-success-icon",
    warning: props.una?.comboboxTriggerWarningIcon ?? "combobox-trigger-warning-icon",
    error: props.una?.comboboxTriggerErrorIcon ?? "combobox-trigger-error-icon",
    default: props?.trailing ?? "combobox-trigger-trailing-icon"
  };
  return {
    btn: btn[props.status ?? "default"],
    icon: icon[props.status ?? "default"]
  };
});
const id = computed(() => props.id ?? randomId("combobox-trigger"));
const status = computed(() => props.status ?? "default");
</script>

<template>
  <ComboboxTrigger
    v-bind="forwardedProps"
    as-child
  >
    <slot name="wrapper">
      <Button
        :id
        :btn="statusClassVariants.btn ? void 0 : props.btn"
        :data-status="status"
        data-slot="combobox-trigger"
        :class="cn(
  'combobox-trigger',
  props.class
)"
        tabindex="0"
        :size
        :una="{
  ...props.una,
  btn: props.una?.comboboxTrigger,
  btnLeading: cn(
    'combobox-trigger-leading',
    props.una?.btnLeading,
    props.una?.comboboxTriggerLeading
  ),
  btnDefaultVariant: statusClassVariants.btn
}"
      >
        <template v-for="(_, name) in $slots" #[name]="slotData">
          <slot :name="name" v-bind="slotData" />
        </template>

        <template #trailing>
          <Icon
            :data-status="status"
            :name="statusClassVariants.icon"
            :class="cn(
  'combobox-trigger-trailing',
  props.una?.btnTrailing
)"
          />
        </template>
      </Button>
    </slot>
  </ComboboxTrigger>
</template>
