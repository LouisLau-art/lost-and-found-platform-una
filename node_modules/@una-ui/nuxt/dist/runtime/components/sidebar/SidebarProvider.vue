<script setup>
import { useCookie } from "#app";
import { useEventListener, useMediaQuery, useVModel } from "@vueuse/core";
import { TooltipProvider } from "reka-ui";
import { computed, ref } from "vue";
import { provideSidebarContext, SIDEBAR_COOKIE_MAX_AGE, SIDEBAR_COOKIE_NAME, SIDEBAR_KEYBOARD_SHORTCUT, SIDEBAR_WIDTH, SIDEBAR_WIDTH_ICON } from "../../composables/useSidebar";
import { cn } from "../../utils";
const props = defineProps({
  defaultOpen: { type: Boolean, required: false, default: true },
  open: { type: Boolean, required: false, default: void 0 },
  class: { type: null, required: false },
  una: { type: Object, required: false }
});
const emits = defineEmits(["update:open"]);
const isMobile = useMediaQuery("(max-width: 768px)");
const openMobile = ref(false);
const openCookie = useCookie(SIDEBAR_COOKIE_NAME, {
  maxAge: SIDEBAR_COOKIE_MAX_AGE,
  default: () => props.defaultOpen ?? false
});
const open = useVModel(props, "open", emits, {
  defaultValue: openCookie.value,
  passive: props.open === void 0
});
function setOpen(value) {
  open.value = value;
  openCookie.value = open.value;
}
function setOpenMobile(value) {
  openMobile.value = value;
}
function toggleSidebar() {
  return isMobile.value ? setOpenMobile(!openMobile.value) : setOpen(!open.value);
}
useEventListener("keydown", (event) => {
  if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {
    event.preventDefault();
    toggleSidebar();
  }
});
const state = computed(() => open.value ? "expanded" : "collapsed");
provideSidebarContext({
  state,
  open,
  setOpen,
  isMobile,
  openMobile,
  setOpenMobile,
  toggleSidebar
});
</script>

<template>
  <TooltipProvider :delay-duration="0">
    <div
      data-slot="sidebar-wrapper"
      :style="{
  '--sidebar-width': SIDEBAR_WIDTH,
  '--sidebar-width-icon': SIDEBAR_WIDTH_ICON
}"
      :class="cn(
  'group/sidebar_wrapper sidebar-provider',
  props.una?.sidebarProvider,
  props.class
)"
      v-bind="$attrs"
    >
      <slot />
    </div>
  </TooltipProvider>
</template>
